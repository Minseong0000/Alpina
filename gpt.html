<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Intersection Observer Example</title>
  <style>
    body {
      height: 300vh;
    }

    .target-section {
      height: 800px;
      background-color: lightgrey;
      margin-bottom: 50px;
    }

    .child-element {
      opacity: 0;
      transition: opacity 0.5s ease-in-out;
    }

    .child-element.visible {
      opacity: 1;
    }
  </style>
</head>

<body>
  <div class="target-section">
    <div class="child-element">I am a child element</div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', (event) => {
      const targetSection = document.querySelector('.target-section');
      const childElement = targetSection.querySelector('.child-element');

      const observerOptions = {
        root: null, // viewport를 root로 사용
        rootMargin: '0px',
        threshold: 0.1 // 10%가 보이면 콜백 실행
      };

      const observerCallback = (entries, observer) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            childElement.classList.add('visible');
          } else {
            childElement.classList.remove('visible');
          }
        });
      };

      const observer = new IntersectionObserver(observerCallback, observerOptions);
      observer.observe(targetSection);
    });
  </script>
</body>

</html>